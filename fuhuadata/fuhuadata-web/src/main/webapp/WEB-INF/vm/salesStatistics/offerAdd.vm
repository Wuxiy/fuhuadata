
<div class="nav-deputy shadow-out clearfix">
    <ul class="breadcrumb pull-right">
        <li><span class="glyphicon glyphicon-map-marker"></span></li>
    </ul>
</div>
<div class="dashboard-wrapper">
    <div class="row">
        <div class="tab-content col-xs-12">
            <!--基本信息-->
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title" lang="zh">
                        基本信息
                    </h3>
                </div>
                <div class="panel-body clearfix">
                    <div class="form-horizontal">
                        <div class="form-group ">
                            <label class="col-xs-1 control-label" lang="zh">订单编号</label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="orderId" value="$!{orderId}" disabled />
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">商机编号</label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="businessId" value="$!{businessId}" disabled />
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">客户名称</label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="customerName" value="" disabled />
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">客户税号</label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="customerDutyParagraph" value="" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-xs-1 control-label" lang="zh">中信保编码</label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="zhongxinbaoNumber" value="" disabled />
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">注册资金</label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="registeredFunds" value="" disabled />
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">企业电话</label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="enterprisePhone" value="" disabled />
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">企业邮箱</label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="enterpriseEmail" value="" disabled />
                            </div>
                        </div>
                        <div class="form-group ">
                            <label class="col-xs-1 control-label" lang="zh">收票客户</label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="billToCustomer" value="" />
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">业务员</label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="salesManName" value="" disabled />
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">部门</label>
                            <div class="col-xs-2">
                                <select class="form-control" id="departmentName">

                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-xs-1 control-label" lang="zh">销售组织</label>
                            <div class="col-xs-2">
                                <select class="form-control" id="saleOrganizationName">

                                </select>
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">目的港<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <select class="form-control" id="destinationPort">

                                </select>
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">起运港<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <select class="form-control" id="shipmentPort">

                                </select>
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">收款协议<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <select class="form-control" id="collectionAgreement">

                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-xs-1 control-label" lang="zh">贸易方式<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <select class="form-control" id="tradeType">
                                    <option value="0">一般贸易</option>
                                    <option value="1">其他</option>
                                </select>
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">贸易术语<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <select class="form-control" id="tradeTerm">

                                </select>
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">币易国别<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <select class="form-control" id="tradeCountry">

                                </select>
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">是否使用信用险</label>
                            <div class="col-xs-2">
                                <select class="form-control" id="isCreditRisk" >
                                    <option value="0">否</option>
                                    <option value="1">是</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-xs-1 control-label" lang="zh">币种<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <select class="form-control" id="currency" >
                                    <option value="0">RMB</option>
                                    <option value="1">美元</option>
                                    <option value="2">欧元</option>
                                </select>
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">原币对美元汇率<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="nusdexchgrate" value=""  />
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">原币对本元汇率<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="nexchangerate" value=""  />
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">保险费率（%）<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="premiumRate" value=""  />
                            </div>

                        </div>
                        <div class="form-group">
                            <label class="col-xs-1 control-label" lang="zh">资金利率（%）<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="discountRate" value=""  />
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">汇损费率（%）<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="lossRate" value=""  />
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">计息比例（%）<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="interestRate" value=""  />
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">信保赔付率（%）<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="creditRate" value=""  />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-xs-1 control-label" lang="zh">销售费率（%）<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="saleRate" value=""  />
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">管理汇率（%）<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="managementRate" value=""  />
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">信保费率（%）<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <input class="form-control" type="text" id="guaranteeRate" value=""  />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-xs-1 control-label" lang="zh">是否可转运</label>
                            <div class="col-xs-2">
                                <select class="form-control" id="transportFlag" >
                                    <option value="0">否</option>
                                    <option value="1">是</option>
                                </select>
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">是否可分批出运</label>
                            <div class="col-xs-2">
                                <select class="form-control" id="partialShipmentFalg" >
                                    <option value="0">否</option>
                                    <option value="1">是</option>
                                </select>
                            </div>
                            <label class="col-xs-1 control-label" lang="zh">内部供货单位<sup class="not-null">*</sup></label>
                            <div class="col-xs-2">
                                <input class="form-control" type="email" id="internalSupplyName" value=""  />
                            </div>
                        </div>
                        <div class="form-group ">
                            <label class="col-xs-1 control-label">企业性质<sup class="not-null">*</sup></label>
                            <div class="col-xs-5">
                                <label class="checkbox-inline">
                                    <input type="checkbox" name="check" class="suitableType cell_edit" value="0" data-text="工厂" disabled> 工厂
                                </label>
                                <label class="checkbox-inline">
                                    <input type="checkbox" name="check" class="suitableType cell_edit" value="1" data-text="经销商" disabled> 经销商
                                </label>
                                <label class="checkbox-inline">
                                    <input type="checkbox" name="check" class="suitableType cell_edit" value="2" data-text="分销商" disabled> 分销商
                                </label>
                                <label class="checkbox-inline">
                                    <input type="checkbox" name="check" class="suitableType cell_edit" value="3" data-text="终端客户" disabled> 终端客户
                                </label>
                                <label class="checkbox-inline">
                                    <input type="checkbox" name="check" class="suitableType cell_edit" id="other" value="4" data-text="其他" disabled> 其他
                                </label>
                                <label class="checkbox-inline">
                                    <input class="form-control" type="text" id="otherRemarks" value="输入企业性质" disabled/>
                                </label>

                            </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-content col-xs-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <button class="btn btn-xs btn-primary panel-heading-btn pull-right" lang="zh" id="Add">新增</button>
                    <h3 class="panel-title">
                        产品信息
                    </h3>
                </div>
                <div class="panel-body">
                    <!--表格-->
                    <table class="table table-condensed table-bordered table-striped text-center">
                        <thead>
                        <tr>
                            <td class="text-center">产品序列号</td>
                            <td class="text-center">品名</td>
                            <td class="text-center">品类</td>
                            <td class="text-center">品牌</td>
                            <td class="text-center">包装规格</td>
                            <td class="text-center">产品数量</td>
                            <td class="text-center">整柜数量</td>
                            <td class="text-center">柜型</td>
                            <td class="text-center">柜数</td>
                            <td class="text-center">交货时间</td>
                            <td class="text-center">最低销售价（元/KG（L)）</td>
                            <td class="text-center">单据要求</td>
                            <td class="text-center">订舱出运要求</td>
                            <td class="text-center">勾选删除项</td>
                        </tr>
                        </thead>
                        <tbody id="">

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="panel-body clearfix">
            <form class="form-horizontal">
                <div class="form-group">
                    <div class="col-xs-2 col-xs-offset-4">
                        <a class="btn btn-block btn-primary" id="finish">完成</a>
                    </div>
                    <div class="col-xs-2">
                        <button class="btn btn-block btn-default" type="reset">重置</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<input id="orderId" type="hidden" value="$!{orderId}">

<script type="text/javascript" language="javascript" src="${request.contextPath}/lib/js/commons/common.js"></script>
<script type="text/javascript" language="javascript" src="${request.contextPath}/lib/js/commons/ajax.js"></script>
<script type="text/javascript" language="javascript" src="${request.contextPath}/lib/js/customer/common.js"></script>
<script type="text/javascript">
    var orderId = $('#orderId').val();
    var businessId = $('#businessId').val();
    console.log(businessId);

    $('#finish').click(function(){
        jQuery.ajax({
            url:'',
            type:'POST',
            data:getOrder(),
            success:function (result) {
                console.log(result);
            }
        })
    })

    function getOrder() {
        var data = {
            "orderId":$('#orderId').val(),
            "businessId":$('#businessId').val(),
            "customerName":$('#customerName').val(),
            "customerDutyParagraph":$('#customerDutyParagraph').val(),
            "enterprisePhone":$('#enterprisePhone').val(),
            "enterpriseEmail":$('#enterpriseEmail').val(),
            "enterpriseNature":getenterpriseNature(),
            "registeredFunds":$('#registeredFunds').val(),
            "zhongxinbaoNumber":$('#zhongxinbaoNumber').val(),
            "billToCustomer":$('#billToCustomer').val(),
            "salesManName":$('#salesManName').val(),
            "departmentName":$('#departmentName').val(),
            "saleOrganizationName":$('#saleOrganizationName').val(),
            "destinationPort":$('#destinationPort').val(),
            "shipmentPort":$('#shipmentPort').val(),
            "collectionAgreement":$('#collectionAgreement').val(),
            "tradeType":$('#tradeType').val(),
            "tradeTerm":$('#tradeTerm').val(),
            "tradeCountry":$('#tradeCountry').val(),
            "currency":$('#currency').val(),
            "premiumRate":$('#premiumRate').val(),
            "guaranteeRate":$('#guaranteeRate').val(),
            "discountRate":$('#discountRate').val(),
            "isCreditRisk":$('#isCreditRisk').val(),
            "lossRate":$('#lossRate').val(),
            "interestRate":$('#interestRate').val(),
            "creditRate":$('#creditRate').val(),
            "saleRate":$('#saleRate').val(),
            "managementRate":$('#managementRate').val(),
            "transportFlag":$('#transportFlag').val(),
            "partialShipmentFalg":$('#partialShipmentFalg').val(),
            "internalSupplyName":$('#internalSupplyName').val(),
            "nusdexchgrate":$('#nusdexchgrate').val(),
            "nexchangerate":$('#nexchangerate').val(),
            "createTime": getTime(),
            "createUserId": 2,
            "createUserName":"杨洋",
            "modifyTime":"2017-03-02 11:44:49",
            "lastmodifyUserId": 1,
            "lastmodifyUserName": "胡向阳"
        }
        return JSON.stringify(data);
    }

    //新增产品信息
    $('#Add').click(function(){
        window.location.href = basePath + '/businessProduct/intoProductBasicInfoRequire?orderId=' + orderId;
    })

    function getenterpriseNature() {
        var arr = [];
        $('input[name="check"]:checked').each(function(){
            var val = $(this).val();
            arr.push(val);
        })
        return arr;
    }
</script>