<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
        "http://www.ibatis.com/dtd/sql-map-2.dtd">
<sqlMap namespace="EXHIBITIONINFO">
    <typeAlias alias="ExhibitionInfo" type="com.fuhuadata.domain.ExhibitionInfo"/>
    <typeAlias alias="ExhibitionInfoQuery" type="com.fuhuadata.domain.query.ExhibitionInfoQuery"/>
    <resultMap id="EXHIBITIONINFO-MAP" class="ExhibitionInfo">
        <result property="exhibitionId" column="exhibition_id" jdbcType="INT" javaType="java.lang.Integer"/>
        <result column="exhibition_name" property="exhibitionName" jdbcType="VARCHAR" javaType="java.lang.String" />
        <result column="sponsor" property="sponsor" jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result column="organizer" property="organizer" jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result column="region" property="region" jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result column="country" property="country" jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result column="city" property="city" jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result column="start_date" property="startDate" jdbcType="TIMESTAMP" javaType="java.sql.Date"/>
        <result column="finish_date" property="finishDate" jdbcType="TIMESTAMP" javaType="java.sql.Date"/>
        <result column="exhibition_addr" property="exhibitionAddr" jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result column="exhibition_link" property="exhibitionLink" jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result column="creator" property="creator" jdbcType="VARCHAR" javaType="java.lang.String"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP" javaType="java.lang.String"/>
    </resultMap>
    <sql id="PAGE-COMMON">
        <dynamic prepend=" WHERE ">
            <isNotNull prepend=" AND " property="exhibitionName">
                exhibition_name = #exhibitionName#
            </isNotNull>
            <isNotNull prepend=" AND " property="country">
                country = #country#
            </isNotNull>
            <isNotNull prepend=" AND " property="city">
                city = #city#
            </isNotNull>
            <isNotNull prepend=" AND " property="searchKey">
                name like concat('%',#searchKey#,'%')
            </isNotNull>
        </dynamic>
    </sql>

    <select id="GET-PAGE" resultMap="EXHIBITIONINFO-MAP" parameterClass="ExhibitionInfoQuery">
        <![CDATA[
        SELECT * FROM exhibition_info
        ]]>
        <isParameterPresent>
        <include refid="PAGE-COMMON"/>
        </isParameterPresent>
        LIMIT #startRow#,#pageSize#
    </select>

    <select id="COUNT" resultClass="java.lang.Integer" parameterClass="ExhibitionInfoQuery">
        <![CDATA[
        SELECT COUNT(*) FROM exhibition_info
        ]]>
        <isParameterPresent>
            <include refid="PAGE-COMMON"/>
        </isParameterPresent>
    </select>
</sqlMap>